# Authorization

We use the OAuth 2.0 protocol, an industry standard for authorization management.

Make sure you have the _CLIENT ID_ an a _SECRET KEY_ provided by our support team. If you don't have them contact us at <a class="link-primary" href="mailto:info@stratifi.com">support@stratifi.com</a>.

## Authorization Code Flow

Following the steps below you will get an access token that can be used to access StratiFi on behalf of the advisor.

1) Redirect the advisor to the StratiFi authorization page:

`https://{{ domain }}/o/authorize/?response_type=code&state={{ state }}&client_id={{ client_id }}`

- **domain:** StratiFi sandbox or production domain.
- **state:** Random string generated by your application.
- **client_id:** Provided by StratiFi.

2) The advisor submits the StratiFi credentials.

   ![login](https://s3.amazonaws.com/api.stratifi.com/login.2.png "Login")

3) The advisor allow your application access the resources in StratiFi.

   ![grant](https://s3.amazonaws.com/api.stratifi.com/grant.2.png "Grant")

4) We redirect the browser to your return url with a single-usage access code.

`https://{{ callback-url }}code={{ code }}&state={{ state }}`

- **callback-url:** URL provided by you when during the application setup.
- **state:** Random string generated by your application.
- **code:** Single-usage code that can be exchanged by an access token.

5) Your application backend exchange the access code by an access token.

```shell

curl "https://backend.stratifi.com/o/token/"

{
    "access_token": "{{ access_token }}",
    "token_type": "Bearer",
    "expires_in": 36000,
    "refresh_token": "{{ refresh_token }}",
    "scope": "read write"
}
```

6) Include the *Authorization* header in your requests as follows: 

`Authorization: Bearer {{ access-token }}`
